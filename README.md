
# WeatherBotBobrAi

## Протестировать бота можно в телеграме:
### @BobrAiForTestWeatherBot (https://t.me/BobrAiForTestWeatherBot)
## Протестировать API можно по ссылке:
http://92.63.103.180:8000/api/docs/

## Описание проекта
Проект представляет собой Telegram-бот для получения информации о погоде в различных городах с возможностью сохранения предпочитаемого города для постоянных запросов. Бот использует API OpenWeather для получения данных о погоде и поддерживает кеширование запросов для уменьшения частоты обращений к внешнему API. Помимо Telegram-бота, в проекте реализовано REST API для управления запросами и просмотра их истории.

## Основные возможности:
- Получение текущей погоды в указанном городе.
- Сохранение предпочитаемого города для автоматических запросов.
- Получение погоды для сохранённого города.
- Кеширование данных о погоде на 30 минут.
- REST API для просмотра истории запросов.
- Пагинация и фильтрация запросов по времени.

## Установка и запуск приложения

### Системные требования
- Python 3.11
- Redis (для кеширования)

### Шаги установки
1. Клонируйте репозиторий с GitHub: https://github.com/Stanis4live/WeatherBotBobrAi.git
2. Установите зависимости: `pip install -r requirements.txt`
3. Создайте файл .env на основе примера .env.sample
4. Выполните миграции: `python manage.py migrate`
5. Запустите Redis: `redis-server`
6. Запустите сервер Django: `python manage.py runserver`
7. Запустите бота: `python manage.py start_bot`

Приложение будет доступно по адресу: http://localhost:8000

## API документация
Документация API доступна в формате Swagger:

- Swagger: http://localhost:8000/api/docs/
- ReDoc: http://localhost:8000/api/redoc/

## Возможности приложения

### Использование Telegram-бота
**Получение погоды в указанном городе:**
Используйте команду /weather <город> для получения текущей погоды в указанном городе.

**Сохранение предпочитаемого города:**
Используйте команду /setcity <город>, чтобы сохранить город для постоянного запроса погоды.

**Получение погоды в сохранённом городе:**
Используйте команду /getcity, чтобы получить погоду в вашем предпочитаемом городе.

### REST API
**Просмотр всех запросов:**
GET `/logs/` — возвращает список всех запросов с возможностью фильтрации по времени.

**Просмотр запросов конкретного пользователя:**
GET `/logs/{user_id}/` — возвращает список запросов конкретного пользователя.

**Параметры фильтрации:**
Запросы можно фильтровать по полю timestamp, например:
`/logs/?timestamp__gte=2024-10-10T00:00:00`

## Заключение
Проект представляет собой Telegram-бот и REST API для получения данных о погоде с кешированием запросов и возможностью работы с сохранёнными городами.